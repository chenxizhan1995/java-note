# 方法和类详解
2021-09-26

Q. 实例变量访问静态成员？

Q. final 成员的初始化时机和限制？

- 控制对类成员的访问：public、private、（default）、protected
- 对象作为实参、以对象为返回值。\
  注：Java 中，参数传递方式是传值，引用类型也是传值，但引用类型的传值和基本类型的
  传值，其更进一步的行为还是有差异的。
- 方法重载（override）：同一个类中，同名不同参数列表的方法之间构成重载。
  - 返回值和异常列表不是方法签名的一部分，重载的方法，其返回值和异常列表可以不同
  - 重载，是同一个类中的方法之间的关系，不是父子类之间的关系。
    - 子类声明的方法，和子类从父类继承而来的方法，可以构成重载。继承而来的方法也是子类的方法。
  * TODO: 当牵扯到泛型的时候方法重载的情形会更复杂
- 递归：Java 的方法调用支持递归
- static 关键字
  - 静态字段和静态方法都是类的静态成员，通过类名直接访问。静态字段为类的所有实例所共享。
  - 静态代码块：在类第一次加载的时候执行。
    * TODO:再深入一点，静态代码段中引用其它静态成员，是有说头的。
- 嵌套类和内部类：类内部和代码块内部可以声明类，这是嵌套类。

- varargs 可变参数
## 静态代码块

```java
{{#include ../code/basic/ch06/StaticBlock.java}}
```
## 嵌套类
嵌套类的作用域仅限于定义嵌套类的代码块。

作为类成员的嵌套类，可以有 static 修饰，也可以没有static修饰。
有static修饰的，叫静态内部类，没有static修饰的，叫内部类。

内部类和实例方法一样，可以访问所在类的所有成员。外部类访问内部类的成员，需要遵循
访问修饰符的限制，且必须创建内部类的实例之后才能访问内部类的成员。

代码块中也可以声明类。代码块中还可以声明匿名类。

TODO：两层以上的嵌套类，语法规则又有说头。

Demo：
```java
{{#include ../code/basic/ch06/InnerClassDemo.java}}
```
## 可变参数
JDK 5 引入可变参数语法。 `type methodName(T...args){}`，三个句点的前后都可以有空格。

- 可变参数形参，在方法内部被封装为数组
- 可变参数实参，可以传入任意个数，包括零个，如果传入零个，在方法内部映射为长度为0的数组
```java
{{#include ../code/basic/ch06/VarargsDemo.java}}
```

- 一个方法只能声明一个可变参数形参，且必须是最后一个参数

- 可变参数的方法可以参与重载
- 可变参数方法，有产生歧义的情况
```java
{{#include ../code/basic/ch06/VarargsAmbiguity.java}}
```
TODO: 当涉及到泛型，方法解析又复杂喽。
